import{r,o as N,a as v,s as T,w as z,h as i,b as e,c as u,j as h,F as C,g as S,t as c,v as j,x as y,y as k}from"./index-L-wCIgqC.js";import{_ as F}from"./AdminLayout-C2pOfWaN.js";const q={class:"p-6"},H={key:0,class:"flex justify-center py-20"},Y={key:1,class:"space-y-4"},P={class:"flex items-center justify-between mb-4"},A={class:"text-lg font-semibold text-gray-800"},I={class:"text-gray-500 text-sm"},J={class:"flex space-x-2"},O=["onClick"],Q=["onClick"],R=["onClick"],W={key:0,class:"border-t pt-4"},X={class:"flex flex-wrap gap-2"},Z=["onClick"],ee=["onClick"],te={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},se={class:"bg-white rounded-2xl p-6 max-w-md w-full"},ae={class:"text-xl font-bold mb-4"},le={class:"mb-4"},ne={class:"mb-6"},ie={class:"flex space-x-3"},oe=["disabled"],re={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},ue={class:"bg-white rounded-2xl p-6 max-w-md w-full"},de={class:"text-xl font-bold mb-4"},ce={class:"text-gray-500 mb-4"},pe={class:"mb-4"},ve={class:"mb-6"},be={class:"flex space-x-3"},me=["disabled"],ye={__name:"KategoriManagePage",setup(fe){const w=r([]),_=r(!0),b=r(!1),g=r(!1),o=r({id:null,nama:"",deskripsi:""}),d=r(!1),m=r(!1),x=r(null),n=r({id:null,nama:"",deskripsi:""});N(f);async function f(){_.value=!0;try{const a=await v.get("/kategori");w.value=a.data}catch(a){console.error(a)}finally{_.value=!1}}function M(){g.value=!1,o.value={id:null,nama:"",deskripsi:""},b.value=!0}function $(a){g.value=!0,o.value={...a},b.value=!0}async function B(){var a,t;d.value=!0;try{g.value?await v.put(`/kategori/${o.value.id}`,o.value):await v.post("/kategori",o.value),b.value=!1,f()}catch(l){alert(((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.error)||"Gagal menyimpan")}finally{d.value=!1}}async function V(a){var t,l;if(confirm("Yakin hapus kategori ini?"))try{await v.delete(`/kategori/${a}`),f()}catch(s){alert(((l=(t=s.response)==null?void 0:t.data)==null?void 0:l.error)||"Gagal menghapus")}}function D(a){x.value=a,n.value={id:null,nama:"",deskripsi:""},m.value=!0}async function E(){var a,t;d.value=!0;try{n.value.id?await v.put(`/kategori/sub-kategori/${n.value.id}`,n.value):await v.post(`/kategori/${x.value.id}/sub-kategori`,n.value),m.value=!1,f()}catch(l){alert(((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.error)||"Gagal menyimpan")}finally{d.value=!1}}async function U(a){var t,l;if(confirm("Yakin hapus sub kategori ini?"))try{await v.delete(`/kategori/sub-kategori/${a}`),f()}catch(s){alert(((l=(t=s.response)==null?void 0:t.data)==null?void 0:l.error)||"Gagal menghapus")}}function G(a){n.value={...a},m.value=!0}return(a,t)=>(i(),T(F,null,{default:z(()=>{var l;return[e("div",q,[e("div",{class:"flex items-center justify-between mb-6"},[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Manajemen Kategori",-1)),e("button",{onClick:M,class:"btn-primary"}," + Tambah Kategori ")]),_.value?(i(),u("div",H,[...t[7]||(t[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-bpjs-500"},null,-1)])])):(i(),u("div",Y,[(i(!0),u(C,null,S(w.value,s=>{var K;return i(),u("div",{key:s.id,class:"card"},[e("div",P,[e("div",null,[e("h3",A,c(s.nama),1),e("p",I,c(s.deskripsi),1)]),e("div",J,[e("button",{onClick:p=>D(s),class:"px-3 py-1 bg-bpjs-100 text-bpjs-600 rounded-lg text-sm hover:bg-bpjs-200"}," + Sub Kategori ",8,O),e("button",{onClick:p=>$(s),class:"px-3 py-1 bg-gray-100 text-gray-600 rounded-lg text-sm hover:bg-gray-200"}," Edit ",8,Q),e("button",{onClick:p=>V(s.id),class:"px-3 py-1 bg-red-100 text-red-600 rounded-lg text-sm hover:bg-red-200"}," Hapus ",8,R)])]),(K=s.subKategoris)!=null&&K.length?(i(),u("div",W,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-500 mb-2"},"Sub Kategori:",-1)),e("div",X,[(i(!0),u(C,null,S(s.subKategoris,p=>(i(),u("div",{key:p.id,class:"inline-flex items-center px-3 py-1 bg-gray-100 rounded-full text-sm"},[e("span",null,c(p.nama),1),e("button",{onClick:L=>{G(p),x.value=s},class:"ml-2 text-gray-400 hover:text-gray-600"},[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,Z),e("button",{onClick:L=>U(p.id),class:"ml-1 text-gray-400 hover:text-red-600"},[...t[9]||(t[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ee)]))),128))])])):h("",!0)])}),128))])),b.value?(i(),u("div",te,[e("div",se,[e("h2",ae,c(g.value?"Edit Kategori":"Tambah Kategori"),1),e("form",{onSubmit:j(B,["prevent"])},[e("div",le,[t[11]||(t[11]=e("label",{class:"block text-gray-700 mb-2"},"Nama Kategori",-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.nama=s),type:"text",class:"input-field",required:""},null,512),[[k,o.value.nama]])]),e("div",ne,[t[12]||(t[12]=e("label",{class:"block text-gray-700 mb-2"},"Deskripsi",-1)),y(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.deskripsi=s),class:"input-field",rows:"3"},null,512),[[k,o.value.deskripsi]])]),e("div",ie,[e("button",{type:"button",onClick:t[2]||(t[2]=s=>b.value=!1),class:"flex-1 btn-secondary"},"Batal"),e("button",{type:"submit",class:"flex-1 btn-primary",disabled:d.value},c(d.value?"Menyimpan...":"Simpan"),9,oe)])],32)])])):h("",!0),m.value?(i(),u("div",re,[e("div",ue,[e("h2",de,c(n.value.id?"Edit":"Tambah")+" Sub Kategori",1),e("p",ce,"Untuk: "+c((l=x.value)==null?void 0:l.nama),1),e("form",{onSubmit:j(E,["prevent"])},[e("div",pe,[t[13]||(t[13]=e("label",{class:"block text-gray-700 mb-2"},"Nama Sub Kategori",-1)),y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.nama=s),type:"text",class:"input-field",required:""},null,512),[[k,n.value.nama]])]),e("div",ve,[t[14]||(t[14]=e("label",{class:"block text-gray-700 mb-2"},"Deskripsi",-1)),y(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>n.value.deskripsi=s),class:"input-field",rows:"3"},null,512),[[k,n.value.deskripsi]])]),e("div",be,[e("button",{type:"button",onClick:t[5]||(t[5]=s=>m.value=!1),class:"flex-1 btn-secondary"},"Batal"),e("button",{type:"submit",class:"flex-1 btn-primary",disabled:d.value},c(d.value?"Menyimpan...":"Simpan"),9,me)])],32)])])):h("",!0)])]}),_:1}))}};export{ye as default};
