import{k as _,r as y,o as w,a as C,c as a,b as e,t as r,p as g,u as j,i as c,d as M,e as P,w as B,f as S,F as T,g as V,h as n,j as N,q as m,n as $}from"./index-L-wCIgqC.js";const z={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},A={class:"gradient-bpjs text-white py-8"},H={class:"max-w-4xl mx-auto px-4"},L={class:"flex items-center justify-between"},F={class:"text-right"},K={class:"text-sm opacity-80"},R={class:"text-xs opacity-60"},q={class:"max-w-4xl mx-auto px-4 py-8"},D={key:0,class:"flex justify-center py-20"},E={key:1,class:"text-center py-20"},G={key:2,class:"space-y-4"},I=["onClick"],W={class:"p-6"},J={class:"flex items-center justify-between"},O={class:"flex items-center space-x-4"},Q={class:"font-bold text-lg text-gray-800"},U={class:"flex items-center space-x-3 mt-1"},X={class:"text-sm text-gray-500"},Y={class:"inline-flex items-center"},Z={class:"text-sm text-gray-500"},ee={class:"inline-flex items-center"},te={class:"mt-2"},se={key:0,class:"text-right"},oe={class:"text-sm text-gray-500 mt-1"},re={key:1,class:"text-gray-400"},ae={key:0,class:"px-6 pb-4"},ne={class:"flex items-center justify-between text-xs text-gray-500 mb-1"},le={class:"h-2 bg-gray-200 rounded-full overflow-hidden"},ce={__name:"HistoryPage",setup(ie){const l=j(),d=_(),x=y([]),p=y(!0);w(async()=>{try{const o=await C.get("/periode/user/history");x.value=o.data}catch(o){console.error(o)}finally{p.value=!1}});function v(o){return o>=90?"bg-green-100 text-green-700":o>=80?"bg-blue-100 text-blue-700":o>=70?"bg-yellow-100 text-yellow-700":o>=60?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}function h(o,t){return t.testCompleted?{text:"Selesai",class:"bg-green-100 text-green-700"}:o==="aktif"?t.materiCompleted?{text:"Siap Test",class:"bg-blue-100 text-blue-700"}:{text:"Baca Materi",class:"bg-yellow-100 text-yellow-700"}:o==="docheck"?{text:"Waktu Habis",class:"bg-orange-100 text-orange-700"}:{text:"Selesai",class:"bg-gray-100 text-gray-700"}}function b(o){var t,u;if(o.userProgress.testCompleted)l.push(`/periode/${o.id}/result`);else if(o.status==="aktif"){const i=(u=(t=d.user)==null?void 0:t.subKategori)==null?void 0:u.id;i&&l.push(`/sub-kategori/${i}`)}else o.userProgress.hasilTest&&l.push(`/periode/${o.id}/result`)}async function k(){await d.logout(),l.push("/")}return(o,t)=>{var i,f;const u=S("router-link");return n(),a("div",z,[e("header",A,[e("div",H,[e("div",L,[t[1]||(t[1]=e("div",null,[e("h1",{class:"text-3xl font-bold mb-2"},"Riwayat Test"),e("p",{class:"opacity-80"},"Lihat semua hasil test yang telah Anda selesaikan")],-1)),e("div",F,[e("p",K,r((i=g(d).user)==null?void 0:i.nama),1),e("p",R,r((f=g(d).user)==null?void 0:f.posisi),1),e("button",{onClick:k,class:"mt-2 text-sm underline opacity-80 hover:opacity-100"}," Logout ")])])])]),e("div",q,[e("button",{onClick:t[0]||(t[0]=s=>g(l).back()),class:"flex items-center text-gray-600 hover:text-bpjs-600 mb-6 transition-colors"},[...t[2]||(t[2]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),c(" Kembali ",-1)])]),p.value?(n(),a("div",D,[...t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-bpjs-500"},null,-1)])])):x.value.length===0?(n(),a("div",E,[t[5]||(t[5]=M('<div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6"><svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><h3 class="text-xl font-bold text-gray-800 mb-2">Belum Ada Riwayat</h3><p class="text-gray-500 mb-6">Anda belum menyelesaikan test apapun</p>',3)),P(u,{to:"/",class:"btn-primary"},{default:B(()=>[...t[4]||(t[4]=[c("Mulai Test",-1)])]),_:1})])):(n(),a("div",G,[(n(!0),a(T,null,V(x.value,s=>(n(),a("div",{key:s.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl cursor-pointer transition-all duration-300",onClick:de=>b(s)},[e("div",W,[e("div",J,[e("div",O,[t[8]||(t[8]=e("div",{class:"w-14 h-14 gradient-bpjs rounded-xl flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",null,[e("h3",Q,r(s.nama),1),e("div",U,[e("span",X,[e("span",Y,[t[6]||(t[6]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1)),c(" "+r(s.jumlahMateri)+" materi ",1)])]),e("span",Z,[e("span",ee,[t[7]||(t[7]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+r(s.jumlahSoal)+" soal ",1)])])]),e("div",te,[e("span",{class:m(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",h(s.status,s.userProgress).class])},r(h(s.status,s.userProgress).text),3)])])]),s.userProgress.hasilTest?(n(),a("div",se,[e("div",{class:m(["inline-flex items-center px-4 py-2 rounded-xl text-lg font-bold",v(s.userProgress.hasilTest.skor||0)])},r((s.userProgress.hasilTest.skor||0).toFixed(0))+"% ",3),e("p",oe,r(s.userProgress.hasilTest.benar)+"/"+r(s.userProgress.hasilTest.totalSoal)+" benar ",1)])):(n(),a("div",re,[...t[9]||(t[9]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]))])]),!s.userProgress.testCompleted&&s.status==="aktif"?(n(),a("div",ae,[e("div",ne,[t[10]||(t[10]=e("span",null,"Progress",-1)),e("span",null,r(s.userProgress.materiCompleted?"Materi selesai":"Baca materi dulu"),1)]),e("div",le,[e("div",{class:"h-full bg-gradient-to-r from-bpjs-400 to-bpjs-600 transition-all duration-500",style:$({width:s.userProgress.materiCompleted?"50%":"0%"})},null,4)])])):N("",!0)],8,I))),128))]))])])}}};export{ce as default};
