import{r,o as L,a as w,s as P,w as E,h as o,b as e,c as i,j as G,F as T,g as C,q as g,t as l,v as H,x as S,y as $}from"./index-L-wCIgqC.js";import{_ as V}from"./AdminLayout-C2pOfWaN.js";const D={class:"p-6"},K={key:0,class:"flex justify-center py-20"},N={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},U=["innerHTML"],q={class:"text-xl font-bold mt-4"},z={class:"p-5"},A={class:"mb-4"},O={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700"},R={class:"text-gray-600 text-sm mb-4"},I={class:"flex items-center justify-between text-sm text-gray-500"},J=["onClick"],W={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Q={class:"bg-white rounded-2xl p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto"},X={class:"text-xl font-bold mb-4"},Y={class:"mb-6"},Z=["innerHTML"],ee={class:"text-lg font-bold mt-2"},te={class:"text-sm opacity-80 mt-1"},ae={class:"mb-4"},se={class:"mb-4"},ne={class:"mb-6"},le={class:"grid grid-cols-3 gap-2"},oe=["onClick","title"],ie={class:"flex space-x-3"},re=["disabled"],pe={__name:"StepConfigPage",setup(de){const b=r([]),m=r(!0),d=r(!1),u=r(!1),s=r(null),M=[{from:"violet-500",to:"purple-600",name:"Violet-Purple"},{from:"blue-500",to:"indigo-600",name:"Blue-Indigo"},{from:"teal-500",to:"cyan-600",name:"Teal-Cyan"},{from:"amber-500",to:"orange-600",name:"Amber-Orange"},{from:"rose-500",to:"pink-600",name:"Rose-Pink"},{from:"emerald-500",to:"green-600",name:"Emerald-Green"}];L(async()=>{await v()});async function v(){m.value=!0;try{const n=await w.get("/step-config");b.value=n.data}catch(n){console.error(n),alert("Gagal memuat konfigurasi step")}finally{m.value=!1}}function j(n){s.value={...n},d.value=!0}function F(n){s.value.gradientFrom=n.from,s.value.gradientTo=n.to}async function B(){var n,t;if(s.value){u.value=!0;try{await w.put(`/step-config/${s.value.id}`,{nama:s.value.nama,deskripsi:s.value.deskripsi,gradientFrom:s.value.gradientFrom,gradientTo:s.value.gradientTo}),d.value=!1,await v()}catch(c){alert(((t=(n=c.response)==null?void 0:n.data)==null?void 0:t.error)||"Gagal menyimpan")}finally{u.value=!1}}}function f(n){return{materi:"Materi/Pembelajaran",test:"Test/Kuesioner",docheck:"Koreksi Jawaban",rekap:"Rekap Hasil"}[n]||n}return(n,t)=>(o(),P(V,null,{default:E(()=>{var c,x,y,_,h,k;return[e("div",D,[t[8]||(t[8]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"Konfigurasi Step Pembelajaran"),e("p",{class:"text-gray-600 mt-1"},"Atur nama dan tampilan setiap step yang dilihat pengguna")],-1)),m.value?(o(),i("div",K,[...t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-bpjs-500"},null,-1)])])):(o(),i("div",N,[(o(!0),i(T,null,C(b.value,a=>(o(),i("div",{key:a.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden"},[e("div",{class:g(["p-6 text-white",`bg-gradient-to-br from-${a.gradientFrom} to-${a.gradientTo}`])},[e("div",{class:"opacity-90",innerHTML:a.icon},null,8,U),e("h3",q,l(a.nama),1)],2),e("div",z,[e("div",A,[e("span",O,l(f(a.id)),1)]),e("p",R,l(a.deskripsi),1),e("div",I,[e("span",null,"Urutan: "+l(a.urutan),1),e("button",{onClick:p=>j(a),class:"px-4 py-2 bg-bpjs-500 text-white rounded-lg hover:bg-bpjs-600 transition-colors"}," Edit ",8,J)])])]))),128))])),d.value?(o(),i("div",W,[e("div",Q,[e("h2",X,"Edit Step: "+l(f((c=s.value)==null?void 0:c.id)),1),e("form",{onSubmit:H(B,["prevent"])},[e("div",Y,[t[4]||(t[4]=e("label",{class:"block text-gray-700 mb-2 font-medium"},"Preview",-1)),e("div",{class:g(["p-4 rounded-xl text-white",`bg-gradient-to-br from-${(x=s.value)==null?void 0:x.gradientFrom} to-${(y=s.value)==null?void 0:y.gradientTo}`])},[e("div",{class:"opacity-90",innerHTML:(_=s.value)==null?void 0:_.icon},null,8,Z),e("h3",ee,l((h=s.value)==null?void 0:h.nama),1),e("p",te,l((k=s.value)==null?void 0:k.deskripsi),1)],2)]),e("div",ae,[t[5]||(t[5]=e("label",{class:"block text-gray-700 mb-2"},"Nama Step",-1)),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.value.nama=a),type:"text",class:"input-field",placeholder:"Contoh: Kupas Tuntas",required:""},null,512),[[$,s.value.nama]])]),e("div",se,[t[6]||(t[6]=e("label",{class:"block text-gray-700 mb-2"},"Deskripsi",-1)),S(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.value.deskripsi=a),class:"input-field",rows:"2",placeholder:"Deskripsi singkat step ini"},null,512),[[$,s.value.deskripsi]])]),e("div",ne,[t[7]||(t[7]=e("label",{class:"block text-gray-700 mb-2"},"Warna Gradient",-1)),e("div",le,[(o(),i(T,null,C(M,a=>{var p;return e("button",{key:a.name,type:"button",onClick:ue=>F(a),class:g(["h-12 rounded-xl border-2 transition-all",[`bg-gradient-to-br from-${a.from} to-${a.to}`,((p=s.value)==null?void 0:p.gradientFrom)===a.from?"border-gray-800 ring-2 ring-offset-2":"border-transparent"]]),title:a.name},null,10,oe)}),64))])]),e("div",ie,[e("button",{type:"button",onClick:t[2]||(t[2]=a=>d.value=!1),class:"flex-1 btn-secondary"}," Batal "),e("button",{type:"submit",class:"flex-1 btn-primary",disabled:u.value},l(u.value?"Menyimpan...":"Simpan"),9,re)])],32)])])):G("",!0)])]}),_:1}))}};export{pe as default};
