import{k as V,r as i,l as _,m as A,o as S,c as s,d as N,b as e,y as c,t as d,q as L,j as D,s as C,v as K,x as T,i as v,e as P,w as j,f as H,A as q,u as R,h as o}from"./index-Cv3Gfbck.js";const U={key:0,class:"text-center"},$={key:1,class:"max-w-md w-full"},E={class:"text-center mb-8"},I={class:"w-20 h-20 mx-auto bg-white rounded-2xl shadow-lg flex items-center justify-center mb-4"},W={class:"text-3xl font-bold text-white mb-2"},F={class:"text-white/80"},G={class:"bg-white rounded-2xl shadow-xl p-8"},J={class:"mb-5"},O={class:"relative"},Q=["disabled"],X={class:"mb-6"},Y={class:"relative"},Z=["type","disabled"],ee={key:0,class:"w-5 h-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},te={key:1,class:"w-5 h-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se={key:0,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl"},oe={class:"text-red-600 text-sm flex items-center"},ae=["disabled"],le={key:0,class:"flex items-center"},re={key:1},ne={class:"mt-6 pt-6 border-t border-gray-200"},ie={class:"flex justify-between mt-6 text-sm"},de={key:2,class:"text-center"},ue={class:"text-xl font-bold text-white mb-2"},pe={__name:"SubKategoriLoginPage",setup(ce){const b=A(),w=R(),f=V(),p=i(""),m=i(""),l=i(!1),g=i(!0),r=i(""),a=i(null),h=i(!1),y=_(()=>b.params.slug),k={TAD:{gradient:"from-emerald-500 to-teal-600",bg:"bg-emerald-50",text:"text-emerald-600",border:"border-emerald-200"},Pegawai:{gradient:"from-blue-500 to-indigo-600",bg:"bg-blue-50",text:"text-blue-600",border:"border-blue-200"},"Petugas Sentralisasi":{gradient:"from-purple-500 to-violet-600",bg:"bg-purple-50",text:"text-purple-600",border:"border-purple-200"}},u=_(()=>{var n;return(n=a.value)!=null&&n.kategori&&k[a.value.kategori.nama]||k.TAD});async function z(){g.value=!0;try{const n=await q.get(`/api/auth/sub-kategori/${y.value}`);a.value=n.data.subKategori}catch{r.value="Sub kategori tidak ditemukan",setTimeout(()=>{w.push("/login")},2e3)}finally{g.value=!1}}async function B(){if(!p.value||!m.value){r.value="NPP dan password tidak boleh kosong";return}if(l.value=!0,r.value="",await f.loginWithSubKategori(p.value,m.value,y.value)){const t=b.query.redirect||"/";w.push(t)}else r.value=f.error||"Login gagal";l.value=!1}return S(()=>{z()}),(n,t)=>{const M=H("router-link");return o(),s("div",{class:c(["min-h-screen flex items-center justify-center bg-gradient-to-br",u.value.gradient]),style:{padding:"3rem 1rem"}},[g.value?(o(),s("div",U,[...t[3]||(t[3]=[N('<div class="w-16 h-16 mx-auto mb-4"><svg class="animate-spin text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-white/80">Memuat...</p>',2)])])):a.value?(o(),s("div",$,[e("div",E,[e("div",I,[(o(),s("svg",{class:c(["w-12 h-12",u.value.text]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])],2))]),e("h1",W,"Login "+d(a.value.nama),1),e("p",F,d(a.value.kategori.nama)+" - "+d(a.value.deskripsi),1)]),e("div",G,[e("form",{onSubmit:L(B,["prevent"])},[e("div",J,[t[6]||(t[6]=e("label",{class:"block text-gray-700 font-medium mb-2",for:"npp"}," Nomor Pokok Pegawai (NPP) ",-1)),e("div",O,[t[5]||(t[5]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})])],-1)),C(e("input",{id:"npp","onUpdate:modelValue":t[0]||(t[0]=x=>p.value=x),type:"text",placeholder:"Masukkan NPP Anda",class:"input-field pl-12",disabled:l.value,autocomplete:"username"},null,8,Q),[[K,p.value]])])]),e("div",X,[t[10]||(t[10]=e("label",{class:"block text-gray-700 font-medium mb-2",for:"password"}," Password ",-1)),e("div",Y,[t[9]||(t[9]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),C(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=x=>m.value=x),type:h.value?"text":"password",placeholder:"Masukkan password",class:"input-field pl-12 pr-12",disabled:l.value,autocomplete:"current-password"},null,8,Z),[[T,m.value]]),e("button",{type:"button",class:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:t[2]||(t[2]=x=>h.value=!h.value)},[h.value?(o(),s("svg",ee,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(o(),s("svg",te,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),r.value?(o(),s("div",se,[e("p",oe,[t[11]||(t[11]=e("svg",{class:"w-5 h-5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),v(" "+d(r.value),1)])])):D("",!0),e("button",{type:"submit",class:c(["w-full py-3 px-6 rounded-xl font-semibold text-white transition-all duration-200 flex items-center justify-center",[u.value.gradient.replace("from-","bg-gradient-to-r from-"),l.value?"opacity-70 cursor-not-allowed":"hover:shadow-lg hover:scale-[1.02]"]]),disabled:l.value},[l.value?(o(),s("span",le,[...t[12]||(t[12]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),v(" Memproses... ",-1)])])):(o(),s("span",re,"Masuk"))],10,ae)],32),e("div",ne,[e("div",{class:c(["p-4 rounded-xl",u.value.bg])},[e("p",{class:c(["text-sm",u.value.text])},[t[13]||(t[13]=e("strong",null,"Info:",-1)),v(" Halaman ini khusus untuk login "+d(a.value.nama)+". Pastikan Anda terdaftar sebagai "+d(a.value.nama)+" untuk dapat login di halaman ini. ",1)],2)],2)])]),e("div",ie,[P(M,{to:"/login",class:"text-white/80 hover:text-white transition-colors"},{default:j(()=>[...t[14]||(t[14]=[v(" ← Pilih Posisi Lain ",-1)])]),_:1}),P(M,{to:"/",class:"text-white/80 hover:text-white transition-colors"},{default:j(()=>[...t[15]||(t[15]=[v(" Beranda → ",-1)])]),_:1})])])):(o(),s("div",de,[t[16]||(t[16]=e("div",{class:"w-20 h-20 mx-auto bg-white/20 rounded-2xl flex items-center justify-center mb-4"},[e("svg",{class:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("h2",ue,d(r.value),1),t[17]||(t[17]=e("p",{class:"text-white/80"},"Mengalihkan ke halaman login...",-1))]))],2)}}};export{pe as default};
