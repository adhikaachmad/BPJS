import{r as c,l as b,o as R,D as Y,a as k,m as q,c as l,z as E,b as e,t as n,p as J,u as O,F as j,i as g,n as U,j as C,g as I,d as H,e as W,w as X,T as Z,C as ee,h as o,y as S,q as te}from"./index-Cv3Gfbck.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"min-h-screen bg-gray-100"},oe={key:0,class:"flex justify-center items-center min-h-screen"},le={key:1,class:"flex flex-col justify-center items-center min-h-screen p-4"},ne={class:"bg-white rounded-2xl shadow-xl p-8 max-w-md text-center"},ie={class:"text-red-500 mb-4"},re={class:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg sticky top-0 z-20"},de={class:"max-w-5xl mx-auto px-4 py-4"},ue={class:"flex items-center justify-between"},ce={class:"text-xl font-bold"},ve={class:"text-right"},me={class:"text-2xl font-bold"},be={class:"bg-white border-b border-gray-200 sticky top-[76px] z-10"},xe={class:"max-w-5xl mx-auto px-4 py-3"},pe={class:"flex items-center justify-between mb-2"},fe={class:"text-sm font-medium text-gray-600"},ge={class:"w-full bg-gray-200 rounded-full h-2"},he={class:"max-w-5xl mx-auto px-4 py-8"},we={key:0,class:"bg-white rounded-2xl shadow-lg overflow-hidden mb-6"},ye={class:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-blue-100"},_e={class:"inline-block px-3 py-1 bg-blue-500 text-white text-sm font-medium rounded-full"},ke={class:"p-6"},je={class:"text-lg text-gray-800 mb-6 leading-relaxed"},Ce={class:"space-y-3"},Se=["onClick"],Be={class:"flex items-start"},Te={class:"text-gray-700"},Me={class:"flex items-center justify-between mb-8"},ze=["disabled"],Ie={class:"bg-white rounded-2xl shadow-lg p-6"},Ne={class:"grid grid-cols-5 sm:grid-cols-10 gap-2"},$e=["onClick"],De={class:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-6"},Pe={class:"mb-6"},Ae={class:"bg-gray-50 rounded-xl p-4"},Fe={class:"flex justify-between mb-2"},Ve={class:"font-bold"},Ke={class:"flex justify-between mb-2"},Ge={class:"font-bold text-emerald-600"},Le={class:"flex justify-between"},Qe={class:"font-bold text-red-600"},Re={key:0,class:"text-amber-600 text-sm mt-3"},Ye={class:"flex space-x-3"},qe=["disabled"],Ee={key:0},Je={key:1},Oe={__name:"QuizPeriodePage",setup(Ue){const N=q(),h=O(),w=c(!0),m=c(null),x=c(!1),$=c(null),p=c(null),B=c(""),v=c([]),u=c({}),r=c(0),f=c(!1),d=b(()=>v.value[r.value]||null),T=b(()=>r.value===0),M=b(()=>r.value===v.value.length-1),y=b(()=>Object.values(u.value).filter(i=>i).length),_=b(()=>v.value.length-y.value);R(async()=>{await D()}),Y(()=>{});async function D(){var i,t;w.value=!0,m.value=null;try{const s=await k.post(`/periode/user/${N.params.periodeId}/test/start`);if($.value=s.data.sessionId,p.value=s.data.periodeId,B.value=s.data.periodeName,v.value=s.data.soals,s.data.jawabans)for(const a of s.data.jawabans)u.value[a.soalPeriodeId]=a.jawaban}catch(s){(t=(i=s.response)==null?void 0:i.data)!=null&&t.error?m.value=s.response.data.message||s.response.data.error:m.value="Gagal memulai test",console.error(s)}finally{w.value=!1}}async function P(i){if(!d.value)return;const t=d.value.id,s=u.value[t];u.value[t]=i;try{await k.post(`/periode/user/${p.value}/test/answer`,{soalPeriodeId:t,jawaban:i})}catch(a){console.error("Failed to save answer:",a),u.value[t]=s}}function A(){M.value||(r.value++,window.scrollTo({top:0,behavior:"smooth"}))}function F(){T.value||(r.value--,window.scrollTo({top:0,behavior:"smooth"}))}function V(i){r.value=i,window.scrollTo({top:0,behavior:"smooth"})}function K(){f.value=!0}function z(){f.value=!1}async function G(){var i,t;x.value=!0;try{const s=await k.post(`/periode/user/${p.value}/test/submit`);h.push(`/periode/${p.value}/result`)}catch(s){console.error("Failed to submit test:",s),alert(((t=(i=s.response)==null?void 0:i.data)==null?void 0:t.error)||"Gagal submit test")}finally{x.value=!1,f.value=!1}}function L(){confirm("Yakin ingin keluar? Jawaban yang sudah disimpan akan tetap tersimpan.")&&h.back()}return(i,t)=>(o(),l("div",ae,[w.value?(o(),l("div",oe,[...t[1]||(t[1]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e("p",{class:"text-gray-500"},"Memuat soal...")],-1)])])):m.value?(o(),l("div",le,[e("div",ne,[t[2]||(t[2]=e("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("p",ie,n(m.value),1),e("button",{onClick:t[0]||(t[0]=s=>J(h).back()),class:"btn-primary"},"Kembali")])])):(o(),l(j,{key:2},[e("header",re,[e("div",de,[e("div",ue,[e("div",null,[e("button",{onClick:L,class:"flex items-center text-white/80 hover:text-white transition-colors mb-1"},[...t[3]||(t[3]=[e("svg",{class:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),g(" Keluar ",-1)])]),e("h1",ce,"Test "+n(B.value),1)]),e("div",ve,[t[4]||(t[4]=e("p",{class:"text-sm opacity-80"},"Dijawab",-1)),e("p",me,n(y.value)+" / "+n(v.value.length),1)])])])]),e("div",be,[e("div",xe,[e("div",pe,[e("span",fe," Soal "+n(r.value+1)+" dari "+n(v.value.length),1)]),e("div",ge,[e("div",{class:"bg-gradient-to-r from-blue-500 to-indigo-600 h-2 rounded-full transition-all duration-300",style:U({width:`${(r.value+1)/v.value.length*100}%`})},null,4)])])]),e("main",he,[d.value?(o(),l("div",we,[e("div",ye,[e("span",_e," Soal "+n(r.value+1),1)]),e("div",ke,[e("p",je,n(d.value.pertanyaan),1),e("div",Ce,[(o(!0),l(j,null,I({A:d.value.opsiA,B:d.value.opsiB,C:d.value.opsiC,D:d.value.opsiD},(s,a)=>(o(),l("button",{key:a,onClick:Q=>P(a),class:S(["w-full p-4 text-left rounded-xl border-2 transition-all duration-200",{"border-blue-500 bg-blue-50 text-blue-700":u.value[d.value.id]===a,"border-gray-200 hover:border-blue-300 hover:bg-gray-50":u.value[d.value.id]!==a}])},[e("div",Be,[e("span",{class:S(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3 flex-shrink-0",{"bg-blue-500 text-white":u.value[d.value.id]===a,"bg-gray-200 text-gray-600":u.value[d.value.id]!==a}])},n(a),3),e("span",Te,n(s),1)])],10,Se))),128))])])])):C("",!0),e("div",Me,[e("button",{onClick:F,disabled:T.value,class:"flex items-center px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 transition-colors"},[...t[5]||(t[5]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),g(" Sebelumnya ",-1)])],8,ze),M.value?(o(),l("button",{key:0,onClick:K,class:"flex items-center px-8 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-medium shadow-lg shadow-emerald-500/30 hover:shadow-xl transition-all"},[...t[6]||(t[6]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),g(" Selesai & Submit ",-1)])])):(o(),l("button",{key:1,onClick:A,class:"flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-medium shadow-lg shadow-blue-500/30 hover:shadow-xl transition-all"},[...t[7]||(t[7]=[g(" Selanjutnya ",-1),e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]))]),e("div",Ie,[t[8]||(t[8]=e("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"Navigasi Soal",-1)),e("div",Ne,[(o(!0),l(j,null,I(v.value,(s,a)=>(o(),l("button",{key:s.id,onClick:Q=>V(a),class:S(["w-10 h-10 rounded-lg flex items-center justify-center text-sm font-medium transition-all",{"bg-blue-500 text-white":a===r.value,"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":u.value[s.id]&&a!==r.value,"bg-gray-100 text-gray-600 hover:bg-gray-200":!u.value[s.id]&&a!==r.value}])},n(a+1),11,$e))),128))]),t[9]||(t[9]=H('<div class="flex items-center justify-center space-x-6 mt-4 text-sm text-gray-500" data-v-88e02b66><div class="flex items-center" data-v-88e02b66><span class="w-4 h-4 bg-emerald-100 rounded mr-2" data-v-88e02b66></span> Sudah dijawab </div><div class="flex items-center" data-v-88e02b66><span class="w-4 h-4 bg-gray-100 rounded mr-2" data-v-88e02b66></span> Belum dijawab </div><div class="flex items-center" data-v-88e02b66><span class="w-4 h-4 bg-blue-500 rounded mr-2" data-v-88e02b66></span> Soal sekarang </div></div>',1))])])],64)),(o(),E(ee,{to:"body"},[W(Z,{name:"modal"},{default:X(()=>[f.value?(o(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:te(z,["self"])},[t[15]||(t[15]=e("div",{class:"absolute inset-0 bg-black/50"},null,-1)),e("div",De,[t[14]||(t[14]=e("h3",{class:"text-xl font-bold text-gray-800 mb-4"},"Konfirmasi Submit",-1)),e("div",Pe,[t[13]||(t[13]=e("p",{class:"text-gray-600 mb-4"},"Apakah Anda yakin ingin menyelesaikan test ini?",-1)),e("div",Ae,[e("div",Fe,[t[10]||(t[10]=e("span",{class:"text-gray-600"},"Total Soal",-1)),e("span",Ve,n(v.value.length),1)]),e("div",Ke,[t[11]||(t[11]=e("span",{class:"text-emerald-600"},"Sudah Dijawab",-1)),e("span",Ge,n(y.value),1)]),e("div",Le,[t[12]||(t[12]=e("span",{class:"text-red-600"},"Belum Dijawab",-1)),e("span",Qe,n(_.value),1)])]),_.value>0?(o(),l("p",Re," Perhatian: Masih ada "+n(_.value)+" soal yang belum dijawab! ",1)):C("",!0)]),e("div",Ye,[e("button",{onClick:z,class:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors"}," Batal "),e("button",{onClick:G,disabled:x.value,class:"flex-1 px-4 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-medium shadow-lg hover:shadow-xl disabled:opacity-50 transition-all"},[x.value?(o(),l("span",Ee,"Menyimpan...")):(o(),l("span",Je,"Ya, Submit"))],8,qe)])])])):C("",!0)]),_:1})]))]))}},Xe=se(Oe,[["__scopeId","data-v-88e02b66"]]);export{Xe as default};
