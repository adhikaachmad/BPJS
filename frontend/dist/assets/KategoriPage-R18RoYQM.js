import{k as E,r as c,l as N,o as R,a as U,m as q,u as G,c as o,j as k,b as e,t as r,F as T,e as W,w as J,f as O,p as x,g as Q,q as X,s as H,v as Y,x as Z,i as g,h as a,y as K}from"./index-Cv3Gfbck.js";const ee={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},te={key:0,class:"flex justify-center items-center min-h-screen"},se={key:1,class:"flex flex-col justify-center items-center min-h-screen"},oe={class:"text-red-500 mb-4"},ae={class:"gradient-bpjs text-white py-12"},le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ne={class:"flex items-center mb-4"},re={class:"text-3xl md:text-4xl font-bold mb-2"},ie={class:"text-lg opacity-80"},de={key:0,class:"mt-4 inline-flex items-center bg-white/20 rounded-lg px-4 py-2"},ue={class:"mr-3"},ce={class:"py-12 -mt-6"},ve={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},pe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},me=["onClick"],xe={key:0,class:"absolute -top-2 -right-2 bg-bpjs-500 text-white text-xs px-2 py-1 rounded-full"},he={class:"flex items-start space-x-4"},ge={class:"flex-grow"},ke={class:"font-bold text-lg text-gray-800 mb-1"},be={class:"text-gray-600 text-sm mb-3"},fe={class:"flex items-center justify-between"},we={class:"text-xs text-gray-500"},ye={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},_e={class:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl"},Me={class:"text-center mb-6"},je={class:"text-xl font-bold text-gray-800"},Ce={key:0,class:"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-xl"},Ae={class:"text-amber-700 text-sm"},Be={class:"mb-4"},ze={class:"relative"},Le=["disabled"],Pe={class:"mb-4"},$e={class:"relative"},Ve=["type","disabled"],Se={key:0,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ne={key:1,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Te={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl"},He={class:"text-red-600 text-sm flex items-center"},De={class:"mb-6 p-3 bg-blue-50 border border-blue-200 rounded-xl"},Fe={class:"text-blue-700 text-sm"},Ie={class:"flex space-x-3"},Ee=["disabled"],Re=["disabled"],Ue={key:0,class:"flex items-center"},qe={key:1},Ge={key:2,class:"text-center"},Qe={__name:"KategoriPage",setup(We){const D=q(),b=G(),l=E(),v=c(null),M=c(!0),y=c(null),h=c(!1),p=c(null),u=c({npp:"",password:""}),m=c(!1),i=c(""),f=c(!1),d=N(()=>{var s;return!l.isAuthenticated||!((s=l.user)!=null&&s.subKategori)?null:l.user.subKategori}),_=N(()=>!d.value||!v.value?!1:d.value.kategoriId===v.value.id);R(async()=>{try{const s=await U.get(`/kategori/${D.params.kategoriId}`);v.value=s.data,l.isAuthenticated&&_.value&&b.push(`/sub-kategori/${d.value.id}`)}catch(s){y.value="Gagal memuat data kategori",console.error(s)}finally{M.value=!1}});function F(s){var t,w;if(l.isAuthenticated){((t=d.value)==null?void 0:t.id)===s.id?b.push(`/sub-kategori/${s.id}`):_.value?(i.value=`Anda terdaftar sebagai ${d.value.nama}, bukan ${s.nama}`,p.value=s,h.value=!0):(i.value=`Anda terdaftar di kategori ${(w=d.value.kategori)==null?void 0:w.nama}. Silakan logout terlebih dahulu.`,p.value=s,h.value=!0);return}p.value=s,u.value={npp:"",password:""},i.value="",h.value=!0}async function I(){if(!u.value.npp||!u.value.password){i.value="NPP dan password harus diisi";return}m.value=!0,i.value="";try{await l.loginWithSubKategori(u.value.npp,u.value.password,p.value.slug)?(h.value=!1,b.push(`/sub-kategori/${p.value.id}`)):i.value=l.error||"Login gagal"}catch{i.value="Terjadi kesalahan saat login"}finally{m.value=!1}}async function j(){await l.logout(),i.value=""}function C(){h.value=!1,i.value=""}return(s,t)=>{var A,B,z,L,P;const w=O("router-link");return a(),o("div",ee,[M.value?(a(),o("div",te,[...t[5]||(t[5]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-bpjs-500"},null,-1)])])):y.value?(a(),o("div",se,[e("p",oe,r(y.value),1),e("button",{onClick:t[0]||(t[0]=n=>s.$router.go(0)),class:"btn-primary"},"Coba Lagi")])):(a(),o(T,{key:2},[e("section",ae,[e("div",le,[e("div",ne,[W(w,{to:"/",class:"text-white/80 hover:text-white transition-colors"},{default:J(()=>[...t[6]||(t[6]=[g(" Beranda ",-1)])]),_:1}),t[7]||(t[7]=e("svg",{class:"w-4 h-4 mx-2 opacity-60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("span",null,r(v.value.nama),1)]),e("h1",re,r(v.value.nama),1),e("p",ie,r(v.value.deskripsi),1),x(l).isAuthenticated?(a(),o("div",de,[t[8]||(t[8]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),e("span",ue,r((A=x(l).user)==null?void 0:A.nama)+" ("+r((B=x(l).user)==null?void 0:B.posisi)+")",1),e("button",{onClick:j,class:"text-white/80 hover:text-white underline text-sm"}," Logout ")])):k("",!0)])]),e("section",ce,[e("div",ve,[t[11]||(t[11]=e("div",{class:"text-center mb-10"},[e("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"Pilih Sub Kategori"),e("p",{class:"text-gray-600"},"Login sesuai dengan posisi Anda untuk mengakses modul")],-1)),e("div",pe,[(a(!0),o(T,null,Q(v.value.subKategoris,n=>{var $,V,S;return a(),o("div",{key:n.id,onClick:Je=>F(n),class:K(["card cursor-pointer hover:border-bpjs-500 border-2 border-transparent group relative",{"ring-2 ring-bpjs-500 border-bpjs-500":(($=d.value)==null?void 0:$.id)===n.id}])},[((V=d.value)==null?void 0:V.id)===n.id?(a(),o("div",xe," Posisi Anda ")):k("",!0),e("div",he,[t[10]||(t[10]=e("div",{class:"w-12 h-12 gradient-bpjs rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",ge,[e("h3",ke,r(n.nama),1),e("p",be,r(n.deskripsi),1),e("div",fe,[e("span",we,r(((S=n.moduls)==null?void 0:S.length)||0)+" Modul ",1),t[9]||(t[9]=e("span",{class:"text-bpjs-600 text-sm font-medium flex items-center group-hover:translate-x-1 transition-transform"},[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})]),g(" Login & Masuk ")],-1))])])])],10,me)}),128))])])])],64)),h.value?(a(),o("div",ye,[e("div",_e,[e("div",Me,[t[12]||(t[12]=e("div",{class:"w-16 h-16 mx-auto gradient-bpjs rounded-2xl flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("h2",je,"Login "+r((z=p.value)==null?void 0:z.nama),1),t[13]||(t[13]=e("p",{class:"text-gray-500 text-sm mt-1"},"Masukkan NPP dan password Anda",-1))]),x(l).isAuthenticated&&i.value?(a(),o("div",Ce,[e("p",Ae,r(i.value),1),e("button",{onClick:j,class:"mt-2 text-amber-700 underline text-sm font-medium"}," Logout dan login ulang ")])):k("",!0),!x(l).isAuthenticated||!_.value?(a(),o("form",{key:1,onSubmit:X(I,["prevent"])},[e("div",Be,[t[15]||(t[15]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"NPP",-1)),e("div",ze,[t[14]||(t[14]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})])],-1)),H(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>u.value.npp=n),type:"text",placeholder:"Masukkan NPP",class:"input-field pl-10",disabled:m.value},null,8,Le),[[Y,u.value.npp]])])]),e("div",Pe,[t[19]||(t[19]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"Password",-1)),e("div",$e,[t[18]||(t[18]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),H(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>u.value.password=n),type:f.value?"text":"password",placeholder:"Masukkan password",class:"input-field pl-10 pr-10",disabled:m.value},null,8,Ve),[[Z,u.value.password]]),e("button",{type:"button",class:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:t[3]||(t[3]=n=>f.value=!f.value)},[f.value?(a(),o("svg",Se,[...t[16]||(t[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(a(),o("svg",Ne,[...t[17]||(t[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),i.value&&!x(l).isAuthenticated?(a(),o("div",Te,[e("p",He,[t[20]||(t[20]=e("svg",{class:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g(" "+r(i.value),1)])])):k("",!0),e("div",De,[e("p",Fe,[t[21]||(t[21]=e("strong",null,"Info:",-1)),t[22]||(t[22]=g(" Anda harus terdaftar sebagai ",-1)),e("strong",null,r((L=p.value)==null?void 0:L.nama),1),t[23]||(t[23]=g(" untuk login di halaman ini. ",-1))])]),e("div",Ie,[e("button",{type:"button",onClick:C,class:"flex-1 btn-secondary",disabled:m.value}," Batal ",8,Ee),e("button",{type:"submit",class:"flex-1 btn-primary flex items-center justify-center",disabled:m.value},[m.value?(a(),o("span",Ue,[...t[24]||(t[24]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),g(" Memproses... ",-1)])])):(a(),o("span",qe,"Login"))],8,Re)])],32)):(a(),o("div",Ge,[e("button",{onClick:t[4]||(t[4]=n=>x(b).push(`/sub-kategori/${d.value.id}`)),class:"btn-primary w-full mb-3"}," Masuk ke "+r((P=d.value)==null?void 0:P.nama),1),e("button",{onClick:C,class:"btn-secondary w-full"}," Tutup ")]))])])):k("",!0)])}}};export{Qe as default};
