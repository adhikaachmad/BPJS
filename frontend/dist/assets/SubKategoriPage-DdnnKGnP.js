import{k as q,r as k,l as E,u as G,o as U,a as $,m as O,c as r,b as t,t as n,F as v,j as u,e as Q,s as X,w as V,f as Y,i as h,p as L,d as Z,g as I,h as o,q as f}from"./index-L-wCIgqC.js";const tt={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},et={key:0,class:"flex justify-center items-center min-h-screen"},st={key:1,class:"flex flex-col justify-center items-center min-h-screen"},at={class:"text-red-500 mb-4"},ot={class:"gradient-bpjs text-white py-16 relative overflow-hidden"},rt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative"},nt={class:"flex items-center text-sm mb-6"},it={class:"text-white"},lt={class:"flex flex-col md:flex-row md:items-center md:justify-between"},dt={class:"text-center md:text-left"},ut={key:0,class:"inline-flex items-center px-4 py-2 bg-white/20 rounded-full text-sm mb-4"},ct={class:"text-4xl md:text-5xl font-bold mb-4"},mt={key:1,class:"text-lg opacity-80 max-w-2xl"},gt={class:"font-semibold"},xt={key:0,class:"mt-6 md:mt-0 bg-white/20 rounded-xl p-4 text-center md:text-right"},ht={class:"font-bold text-lg"},pt={class:"text-sm opacity-80"},kt={key:0,class:"py-20"},ft={class:"py-6 bg-white border-b border-gray-200"},bt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},vt={class:"flex items-center justify-center space-x-2 md:space-x-4 text-sm overflow-x-auto"},wt={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},yt={key:1},_t={class:"font-medium"},Ct={key:0,class:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},jt={class:"py-12"},Tt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Bt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Mt=["onClick"],St=["innerHTML"],At={class:"text-xl font-bold mt-4"},$t={class:"p-5"},Lt={class:"text-gray-600 text-sm mb-4"},Pt={class:"flex items-center justify-between text-sm text-gray-500 mb-4"},Dt={class:"flex items-center"},Vt={key:0,class:"flex items-center text-emerald-600"},It=["disabled"],Kt={key:0,class:"mt-3 text-center"},Rt={key:1,class:"mt-3 text-center"},Ft={key:0,class:"py-8 bg-white border-t border-gray-200"},Ht={class:"max-w-4xl mx-auto px-4"},zt={class:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-2xl p-6"},Nt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Jt={class:"bg-white rounded-xl p-4 text-center"},Wt={class:"text-3xl font-bold text-emerald-600"},qt={class:"bg-white rounded-xl p-4 text-center"},Et={class:"text-3xl font-bold text-green-600"},Gt={class:"bg-white rounded-xl p-4 text-center"},Ut={class:"text-3xl font-bold text-red-600"},Ot={class:"bg-white rounded-xl p-4 text-center"},Qt={class:"text-3xl font-bold text-gray-600"},Zt={__name:"SubKategoriPage",setup(Xt){const K=O(),p=G(),w=q(),c=k(null),i=k(null),j=k([]),T=k(!0),y=k(null),B=k(!1),M=E(()=>{var b;if(!i.value||j.value.length===0)return[];const s=i.value,e=s.userProgress||{},d=_=>j.value.find(C=>C.id===_)||{},l=d("materi"),m=d("test"),g=d("docheck"),x=d("rekap");return[{id:"materi",name:l.nama||"Kupas Tuntas",description:l.deskripsi||"Pelajari materi untuk mempersiapkan test",icon:l.icon||"",gradient:`from-${l.gradientFrom||"violet-500"} to-${l.gradientTo||"purple-600"}`,count:s.jumlahMateri,countLabel:"materi",completed:e.materiCompleted,canAccess:!0,status:e.materiCompleted?"Selesai":"Baca Materi",action:()=>p.push(`/periode/${s.id}/materi`)},{id:"test",name:m.nama||"JITU",description:m.deskripsi||"Kerjakan soal-soal test untuk menguji pemahaman",icon:m.icon||"",gradient:`from-${m.gradientFrom||"blue-500"} to-${m.gradientTo||"indigo-600"}`,count:s.jumlahSoal,countLabel:"soal",completed:e.testCompleted,canAccess:e.materiCompleted&&s.status==="aktif",status:R(s,e),statusClass:F(s,e),scheduleInfo:z(s),action:()=>N()},{id:"docheck",name:g.nama||"Do-Check",description:g.deskripsi||"Lihat koreksi dan pembahasan jawaban test",icon:g.icon||"",gradient:`from-${g.gradientFrom||"teal-500"} to-${g.gradientTo||"cyan-600"}`,count:((b=e.hasilTest)==null?void 0:b.benar)||0,countLabel:"benar",completed:e.testCompleted&&(s.status==="docheck"||s.status==="selesai"),canAccess:e.testCompleted&&(s.status==="docheck"||s.status==="selesai"),status:H(s,e),action:()=>p.push(`/periode/${s.id}/result`)},{id:"rekap",name:x.nama||"Rekapin",description:x.deskripsi||"Lihat rekap progress dan hasil pembelajaran",icon:x.icon||"",gradient:`from-${x.gradientFrom||"amber-500"} to-${x.gradientTo||"orange-600"}`,count:e.hasilTest?Math.round(e.hasilTest.skor):0,countLabel:"skor",completed:e.testCompleted,canAccess:e.testCompleted,status:e.testCompleted?"Lihat Rekap":"Selesaikan test",action:()=>p.push(`/periode/${s.id}/result`)}]});U(async()=>{await S()});async function S(){var s;T.value=!0,y.value=null,B.value=!1;try{const[e,d]=await Promise.all([$.get("/step-config"),$.get(`/kategori/sub-kategori/${K.params.subKategoriId}`)]);j.value=e.data,c.value=d.data;try{const l=await $.get("/periode/user/active");i.value=l.data}catch(l){if(((s=l.response)==null?void 0:s.status)===404)B.value=!0;else throw l}}catch(e){y.value="Gagal memuat data",console.error(e)}finally{T.value=!1}}function R(s,e){return e.testCompleted?"Selesai":e.materiCompleted?s.status==="terjadwal"?"Belum Dibuka":s.status==="docheck"||s.status==="selesai"?"Waktu Habis":s.status==="aktif"?"Mulai Test":"Tidak Tersedia":"Baca materi dulu"}function F(s,e){return e.testCompleted?"bg-green-100 text-green-700":s.status==="terjadwal"?"bg-yellow-100 text-yellow-700":s.status==="aktif"&&e.materiCompleted?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-500"}function H(s,e){return e.testCompleted?s.status==="aktif"?"Belum Tersedia":s.status==="docheck"||s.status==="selesai"?"Lihat Koreksi":"Tidak Tersedia":"Kerjakan test dulu"}function z(s){return s.status==="terjadwal"&&s.jamMulai?`Jadwal: ${P(s.jamMulai)}`:s.status==="aktif"&&s.jamBerakhir?`Berakhir: ${P(s.jamBerakhir)}`:null}function P(s){return s?new Date(s).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}async function N(){if(!i.value)return;const s=i.value,e=s.userProgress||{};if(!e.materiCompleted){alert("Selesaikan materi terlebih dahulu");return}if(s.status!=="aktif"){alert(s.status==="terjadwal"?"Test belum dibuka, silakan tunggu jadwal":"Waktu pengerjaan test sudah berakhir");return}if(e.testCompleted){p.push(`/periode/${s.id}/result`);return}p.push(`/periode/${s.id}/test`)}function J(s){s.canAccess&&s.action&&s.action()}async function W(){await w.logout(),p.push("/")}return(s,e)=>{var l,m,g,x,b,_,C,D;const d=Y("router-link");return o(),r("div",tt,[T.value?(o(),r("div",et,[...e[0]||(e[0]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-bpjs-500"},null,-1)])])):y.value?(o(),r("div",st,[t("p",at,n(y.value),1),t("button",{onClick:S,class:"btn-primary"},"Coba Lagi")])):(o(),r(v,{key:2},[t("section",ot,[e[6]||(e[6]=t("div",{class:"absolute inset-0 opacity-10"},[t("div",{class:"absolute top-0 right-0 w-96 h-96 bg-white rounded-full transform translate-x-1/3 -translate-y-1/3"}),t("div",{class:"absolute bottom-0 left-0 w-64 h-64 bg-white rounded-full transform -translate-x-1/3 translate-y-1/3"})],-1)),t("div",rt,[t("div",nt,[Q(d,{to:"/",class:"text-white/70 hover:text-white transition-colors"},{default:V(()=>[...e[1]||(e[1]=[h(" Beranda ",-1)])]),_:1}),e[2]||(e[2]=t("svg",{class:"w-4 h-4 mx-2 opacity-60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),(l=c.value)!=null&&l.kategori?(o(),X(d,{key:0,to:`/kategori/${c.value.kategori.id}`,class:"text-white/70 hover:text-white transition-colors"},{default:V(()=>[h(n(c.value.kategori.nama),1)]),_:1},8,["to"])):u("",!0),e[3]||(e[3]=t("svg",{class:"w-4 h-4 mx-2 opacity-60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),t("span",it,n((m=c.value)==null?void 0:m.nama),1)]),t("div",lt,[t("div",dt,[(g=c.value)!=null&&g.kategori?(o(),r("div",ut,n(c.value.kategori.nama),1)):u("",!0),t("h1",ct,n((x=c.value)==null?void 0:x.nama),1),i.value?(o(),r("p",mt,[e[4]||(e[4]=h(" Periode: ",-1)),t("span",gt,n(i.value.nama),1)])):u("",!0)]),L(w).isAuthenticated?(o(),r("div",xt,[e[5]||(e[5]=t("p",{class:"text-sm opacity-80"},"Login sebagai:",-1)),t("p",ht,n((b=L(w).user)==null?void 0:b.nama),1),t("p",pt,n((_=L(w).user)==null?void 0:_.posisi),1),t("button",{onClick:W,class:"mt-2 text-sm underline opacity-80 hover:opacity-100"}," Logout ")])):u("",!0)])])]),B.value?(o(),r("section",kt,[t("div",{class:"max-w-2xl mx-auto px-4 text-center"},[t("div",{class:"bg-white rounded-2xl shadow-xl p-12"},[e[7]||(e[7]=Z('<div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6"><svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h2 class="text-2xl font-bold text-gray-800 mb-4">Belum Ada Periode Aktif</h2><p class="text-gray-600 mb-6"> Saat ini belum ada periode test yang dijadwalkan untuk kategori Anda. Silakan tunggu pengumuman jadwal dari admin. </p>',3)),t("button",{onClick:S,class:"btn-primary"}," Refresh ")])])])):i.value?(o(),r(v,{key:1},[t("section",ft,[t("div",bt,[t("div",vt,[(o(!0),r(v,null,I(M.value,(a,A)=>(o(),r(v,{key:a.id},[t("div",{class:f(["flex items-center whitespace-nowrap",a.completed?"text-emerald-600":a.canAccess?"text-blue-600":"text-gray-400"])},[t("span",{class:f(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold mr-2",a.completed?"bg-emerald-100":a.canAccess?"bg-blue-100":"bg-gray-100"])},[a.completed?(o(),r("svg",wt,[...e[8]||(e[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(o(),r("span",yt,n(A+1),1))],2),t("span",_t,n(a.name),1)],2),A<M.value.length-1?(o(),r("svg",Ct,[...e[9]||(e[9]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])])):u("",!0)],64))),128))])])]),t("section",jt,[t("div",Tt,[e[14]||(e[14]=t("div",{class:"text-center mb-10"},[t("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"Pilih Modul Pembelajaran"),t("p",{class:"text-gray-600"},"Ikuti urutan pembelajaran untuk hasil yang optimal")],-1)),t("div",Bt,[(o(!0),r(v,null,I(M.value,a=>(o(),r("div",{key:a.id,class:f(["bg-white rounded-2xl shadow-lg overflow-hidden border-2 transition-all duration-300",{"border-transparent hover:shadow-xl cursor-pointer":a.canAccess,"border-gray-200 opacity-60":!a.canAccess}]),onClick:A=>J(a)},[t("div",{class:f(["p-6 text-white",`bg-gradient-to-br ${a.gradient}`])},[t("div",{class:"opacity-90",innerHTML:a.icon},null,8,St),t("h3",At,n(a.name),1)],2),t("div",$t,[t("p",Lt,n(a.description),1),t("div",Pt,[t("span",Dt,[e[10]||(e[10]=t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),h(" "+n(a.count)+" "+n(a.countLabel),1)]),a.completed?(o(),r("span",Vt,[...e[11]||(e[11]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),h(" Selesai ",-1)])])):u("",!0)]),t("button",{class:f(["w-full py-3 rounded-xl font-semibold transition-all duration-300",{"bg-gradient-to-r text-white shadow-lg hover:shadow-xl":a.canAccess,[a.gradient]:a.canAccess,"bg-gray-100 text-gray-400 cursor-not-allowed":!a.canAccess}]),disabled:!a.canAccess},n(a.status),11,It),a.scheduleInfo?(o(),r("div",Kt,[t("span",{class:f(["inline-flex items-center text-xs px-2 py-1 rounded-full",a.statusClass])},[e[12]||(e[12]=t("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),h(" "+n(a.scheduleInfo),1)],2)])):!a.canAccess&&!a.completed?(o(),r("div",Rt,[...e[13]||(e[13]=[t("span",{class:"inline-flex items-center text-xs text-gray-400"},[t("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),h(" Selesaikan tahap sebelumnya ")],-1)])])):u("",!0)])],10,Mt))),128))])])]),(C=i.value.userProgress)!=null&&C.hasilTest?(o(),r("section",Ft,[t("div",Ht,[t("div",zt,[e[19]||(e[19]=t("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"Hasil Test Anda",-1)),t("div",Nt,[t("div",Jt,[t("p",Wt,n((D=i.value.userProgress.hasilTest.skor)==null?void 0:D.toFixed(0)),1),e[15]||(e[15]=t("p",{class:"text-sm text-gray-500"},"Skor",-1))]),t("div",qt,[t("p",Et,n(i.value.userProgress.hasilTest.benar),1),e[16]||(e[16]=t("p",{class:"text-sm text-gray-500"},"Benar",-1))]),t("div",Gt,[t("p",Ut,n(i.value.userProgress.hasilTest.salah),1),e[17]||(e[17]=t("p",{class:"text-sm text-gray-500"},"Salah",-1))]),t("div",Ot,[t("p",Qt,n(i.value.userProgress.hasilTest.tidakDijawab),1),e[18]||(e[18]=t("p",{class:"text-sm text-gray-500"},"Tidak Dijawab",-1))])])])])])):u("",!0)],64)):u("",!0)],64))])}}};export{Zt as default};
