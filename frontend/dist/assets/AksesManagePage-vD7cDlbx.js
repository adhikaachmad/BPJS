import{r as c,o as j,a as k,s as B,w as b,h as l,b as e,e as M,c as o,j as x,T as S,t as i,F as _,g as w,q as u,i as g}from"./index-L-wCIgqC.js";import{_ as z}from"./AdminLayout-C2pOfWaN.js";const V={class:"p-6"},N={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center"},T={class:"text-green-700"},L={key:0,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center"},$={class:"text-red-700"},D={key:1,class:"flex justify-center items-center py-20"},F={key:2,class:"space-y-6"},G={class:"px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200"},H={class:"flex items-center justify-between"},P={class:"flex items-center space-x-3"},q={class:"text-lg font-bold text-gray-800"},E={class:"text-sm text-gray-500"},I={class:"flex items-center space-x-2"},J={class:"text-sm text-gray-500"},O={class:"flex items-center space-x-1"},Q={class:"divide-y divide-gray-100"},R={class:"flex items-center space-x-4"},U={class:"flex items-center space-x-2"},W={class:"font-semibold text-gray-800"},X={class:"text-sm text-gray-500 mt-0.5"},Y={class:"text-gray-400"},Z=["onClick","disabled"],K={key:0,class:"absolute inset-0 flex items-center justify-center"},ee={key:0,class:"px-6 py-8 text-center text-gray-500"},le={__name:"AksesManagePage",setup(se){const p=c(!0),v=c({}),f=c([]),r=c(null),d=c("");j(async()=>{await C()});async function C(){p.value=!0,r.value=null;try{const a=await k.get("/admin/sub-kategori-access");f.value=a.data}catch(a){r.value="Gagal memuat data",console.error(a)}finally{p.value=!1}}async function A(a){var s,n;v.value[a.id]=!0,r.value=null,d.value="";try{const t=await k.put(`/admin/sub-kategori/${a.id}/toggle-access`,{isActive:!a.isActive});a.isActive=!a.isActive,d.value=t.data.message,setTimeout(()=>{d.value=""},3e3)}catch(t){r.value=((n=(s=t.response)==null?void 0:s.data)==null?void 0:n.error)||"Gagal mengubah akses"}finally{v.value[a.id]=!1}}function m(a){return a.subKategoris.filter(s=>s.isActive).length}function y(a){return a.subKategoris.length}return(a,s)=>(l(),B(z,null,{default:b(()=>[e("div",V,[s[6]||(s[6]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"Akses Login SubKategori"),e("p",{class:"text-gray-600 mt-1"},'Kelola akses login untuk setiap sub kategori. SubKategori yang dinonaktifkan akan menampilkan halaman "Coming Soon".')],-1)),M(S,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:b(()=>[d.value?(l(),o("div",N,[s[0]||(s[0]=e("svg",{class:"w-5 h-5 text-green-500 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",T,i(d.value),1)])):x("",!0)]),_:1}),r.value?(l(),o("div",L,[s[1]||(s[1]=e("svg",{class:"w-5 h-5 text-red-500 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",$,i(r.value),1)])):x("",!0),p.value?(l(),o("div",D,[...s[2]||(s[2]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-bpjs-600"},null,-1)])])):(l(),o("div",F,[(l(!0),o(_,null,w(f.value,n=>(l(),o("div",{key:n.id,class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},[e("div",G,[e("div",H,[e("div",P,[s[3]||(s[3]=e("div",{class:"w-10 h-10 bg-bpjs-100 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-bpjs-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})])],-1)),e("div",null,[e("h2",q,i(n.nama),1),e("p",E,i(n.deskripsi),1)])]),e("div",I,[e("span",J,i(m(n))+" / "+i(y(n))+" aktif ",1),e("div",O,[e("div",{class:u(["w-2 h-2 rounded-full",m(n)===y(n)?"bg-green-500":m(n)>0?"bg-yellow-500":"bg-red-500"])},null,2)])])])]),e("div",Q,[(l(!0),o(_,null,w(n.subKategoris,t=>{var h;return l(),o("div",{key:t.id,class:"px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors"},[e("div",R,[e("div",{class:u(["w-3 h-3 rounded-full flex-shrink-0",t.isActive?"bg-green-500":"bg-gray-300"])},null,2),e("div",null,[e("div",U,[e("h3",W,i(t.nama),1),e("span",{class:u(["px-2 py-0.5 text-xs rounded-full",t.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"])},i(t.isActive?"Aktif":"Nonaktif"),3)]),e("p",X,[g(i(((h=t._count)==null?void 0:h.users)||0)+" pengguna terdaftar ",1),s[4]||(s[4]=e("span",{class:"mx-1"},"â€¢",-1)),e("span",Y,"/login/"+i(t.slug),1)])])]),e("button",{onClick:te=>A(t),disabled:v.value[t.id],class:u(["relative inline-flex h-7 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-bpjs-500 focus:ring-offset-2 disabled:opacity-50",t.isActive?"bg-green-500":"bg-gray-300"])},[v.value[t.id]?(l(),o("span",K,[...s[5]||(s[5]=[e("svg",{class:"animate-spin h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(l(),o("span",{key:1,class:u(["inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform",t.isActive?"translate-x-8":"translate-x-1"])},null,2))],10,Z)])}),128))]),n.subKategoris.length===0?(l(),o("div",ee," Belum ada sub kategori ")):x("",!0)]))),128))])),s[7]||(s[7]=e("div",{class:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-xl"},[e("div",{class:"flex items-start space-x-3"},[e("svg",{class:"w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",{class:"text-sm text-blue-700"},[e("p",{class:"font-medium mb-1"},"Catatan:"),e("ul",{class:"list-disc list-inside space-y-1 text-blue-600"},[e("li",null,[g("SubKategori yang "),e("strong",null,"aktif"),g(" dapat diakses untuk login oleh pengguna")]),e("li",null,[g("SubKategori yang "),e("strong",null,"nonaktif"),g(' akan menampilkan halaman "Coming Soon" saat diakses')]),e("li",null,"Pengguna yang sudah login tidak akan terpengaruh sampai sesi mereka berakhir")])])])],-1))])]),_:1}))}};export{le as default};
